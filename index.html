<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Safe Player</title>
    
    <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet" />

    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            overflow: hidden;
        }

        /* A LEJÁTSZÓ KONTÉNER */
        .video-js {
            width: 100vw !important;
            height: 100vh !important;
        }

        /* --- A FŐ TRÜKK: ÉRINTÉS TILTÁSA A VIDEÓN --- */
        /* Ez azt mondja a böngészőnek: "Ez a videó nem kattintható". 
           Így a natív TV gombok nem fognak reagálni, vagy meg sem jelennek kattintásra. */
        .video-js video {
            pointer-events: none !important; 
        }

        /* --- A LÁTHATATLAN PAJZS --- */
        /* Ez egy réteg, ami lefedi a videót. Erre kattintasz a videó helyett. */
        #click-shield {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; /* -50px, hogy az alsó sávhoz hozzáférj, ha kell */
            z-index: 50; /* A videó felett van */
            background: transparent; /* Láthatatlan */
            cursor: pointer;
        }

        /* A Video.js vezérlősávja legyen a pajzs felett, hogy azt tudd nyomkodni */
        .vjs-control-bar {
            z-index: 100 !important; 
        }
        
        /* A nagy lejátszás gomb is legyen kattintható */
        .vjs-big-play-button {
            z-index: 101 !important;
            pointer-events: auto !important;
        }

    </style>
</head>
<body>

    <div id="click-shield"></div>

    <video id="tv-player" class="video-js vjs-default-skin" playsinline webkit-playsinline></video>

    <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>

    <script>
        // URL paraméter kezelése
        const urlParams = new URLSearchParams(window.location.search);
        const videoUrl = urlParams.get('url');

        var player = videojs('tv-player', {
            controls: true,
            autoplay: true,
            preload: 'auto',
            fluid: true,
            html5: {
                vhs: { overrideNative: true },
                nativeAudioTracks: false,
                nativeVideoTracks: false
            }
        });

        if (videoUrl) {
            let type = (videoUrl.indexOf('.m3u8') > -1) ? 'application/x-mpegURL' : 'video/mp4';
            player.src({ src: videoUrl, type: type });
        }

        // --- PAJZS LOGIKA ---
        // Amikor a képernyő közepére (a pajzsra) kattintasz:
        document.getElementById('click-shield').addEventListener('click', function() {
            if (player.paused()) {
                player.play();
            } else {
                player.pause();
            }
            
            // Opcionális: Ha kattintasz, mutassa meg a vezérlőket egy kis időre
            player.userActive(true);
        });
        
        // Dupla kattintásra teljes képernyő (Video.js féle, nem a TV féle)
        document.getElementById('click-shield').addEventListener('dblclick', function() {
            if (player.isFullscreen()) {
                player.exitFullscreen();
            } else {
                player.requestFullscreen();
            }
        });

    </script>
</body>
</html>
